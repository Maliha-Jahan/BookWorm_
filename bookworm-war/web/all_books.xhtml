<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <style>
            * {box-sizing: border-box;}

            body {
              font-family: Arial, Helvetica, sans-serif;
            }

            a:link {
              color: black;
              text-decoration: none
            }

            /* visited link */
            a:visited {
              color: black;
              text-decoration: none
            }

            /* mouse over link */
            a:hover {
              color: blue;
              text-decoration: none
            }

            /* selected link */
            a:active {
              color: blue;
              text-decoration: none
            }

            .column{
                float: left;
                padding: 1px;
                color: black;
                background-color: white;
            }

            .row:after{
                content: "";
                display: table;
                clear: both;
            }

            .dropdown {
              float: right;
              overflow: hidden;
            }

            .dropdown .dropbtn {
              font-size: 16px;  
              border: none;
              outline: none;
              color: #3E1B0F; 
              padding: 14px 16px;
              background-color: inherit;
              font-family: inherit;
              margin: 0;
            }

            .topnav {
              list-style-type: none;
              overflow: hidden;
              margin: 0;
              padding: 0;
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              background-color: #EFEAE2;
            }

            .topnav a {
              float: right;
              font-size: 16px;
              color: #3E1B0F; 
              text-align: left;
              padding: 14px 16px;
              text-decoration: none;
            }

            .topnav a:hover, .dropdown:hover .dropbtn {
              background-color: #3E1B0F; 
              color: white;
            }

            .topnav a.active {
              background-color: #3E1B0F;
              color: white;
            }

            select#soflow{
               -webkit-appearance: button;

               -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);
               -webkit-padding-end: 20px;
               -webkit-padding-start: 2px;
               -webkit-user-select: none;
               border: none;
               color: #555;
               font-size: inherit;
               margin: 0px;
               overflow: hidden;
               text-align : center;
               text-overflow: ellipsis;
               white-space: nowrap;
               float : left;

            }

            .topnav .search-container {
              float: left;
              margin-top : 7px;
              -webkit-border-radius: 2px;
              -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);
            }

            .dropdown-content {
              display: none;
              position: fixed;
              background-color: #f9f9f9;
              min-width: 160px;
              box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
              z-index: 1;
            }

            .dropdown-content a {
              float: none;
              color: #564A3D;
              padding: 12px 16px;
              text-decoration: none;
              display: block;
              text-align: left;
            }

            .dropdown-content a:hover {
              background-color: #ddd;
            }

            .dropdown:hover .dropdown-content {
              display: block;
            }

            .topnav input[type=text] {
              padding: 6px;
              height : 35px;
              font-size: 17px;
              border: none;
            }

            .topnav .search-container button {
              padding: 6px 10px;
              background: white;
              font-size: 17px;
              border: none;
              cursor: pointer;
              width : 36px;
              height : 35px;
            }

            .topnav .search-container button:hover {
              border: thin solid #3E1B0F; 
              box-shadow: 0 5px 5px -5px #3E1B0F;
            }

            select#soflow:hover {
                    border: thin solid #3E1B0F; 
                box-shadow: 0 5px 5px -5px #3E1B0F;
            }

            .foc {

            }

            .foc:focus {
                    border: thin solid #3E1B0F; 
                box-shadow: 0 5px 5px -5px #3E1B0F;
                }

            @media screen and (max-width: 600px) {
              .topnav .search-container {
                float: none;
              }
              .topnav a, .topnav input[type=text], .topnav .search-container button {
                float: none;
                display: block;
                text-align: left;
                width: 100%;
                margin: 0;
                padding: 14px;
              }
              .topnav input[type=text] {
                border: 1px solid #ccc;  
              }
            }
</style>
        <title>BookWorm: All Books</title>
    </h:head>
    <h:body style="width: auto; background-color: #F6F4EE">
        <div class="topnav" style="border-bottom: thin solid #ccc; box-shadow: 0 5px 5px -5px #ccc">
            <div class="column" style="width: 10%; background-color: #EFEAE2"></div>
            <img src="Icons/logo1_2.png" alt="BookWorm" width="200" height="50" style="float: left"></img>
            <div class="column" style="width: 10%; background-color: #EFEAE2"></div>
            <div class="search-container" style="width: 20%">
                <f:view>
                    <h:form>
                        <h:selectOneMenu id="choice" value="#{bookController.choice_Search}" title="Choice" style="height: 35px; background-color: white">
                            <f:selectItem itemValue = "1" itemLabel = "Title" /> 
                            <f:selectItem itemValue = "2" itemLabel = "Author" /> 
                        </h:selectOneMenu>
                        <h:outputLabel for="bookName" />&nbsp;&nbsp;
                        <h:inputText id="bookName" value="#{bookController.param}" title="BookName" required="true" requiredMessage="Search Box Can Not Be Empty"/>
                        <h:commandButton action="#{bookController.goToResult()}" image="Icons/search.png" 
                                         style="width: 20px; height: 20px; padding-left: 3px"></h:commandButton>
                    </h:form>
                </f:view>
            </div>
            <div class="column" style="width: 10%; background-color: #EFEAE2; float: right"></div>
            <div class="dropdown">
                <button class="dropbtn">My Account 
                    <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-content">
                    <a href="accountsetting.xhtml">Account Settings</a>
                    <a href="bookshelf.xhtml">My Bookshelf</a>
                    <f:view><h:form rendered="#{loginController.checkAdmin()}"><a href="all_users.xhtml">All Users</a></h:form></f:view>
                    <a><h:form><h:commandButton value="LogOut" action="#{loginController.logOut()}"></h:commandButton></h:form></a>
                        <!--<h:link value="LogOut" onclick="LoginController.logOut()"></h:link>-->
                </div>
            </div>
            <a href="profile.xhtml">Profile</a>
            <a href="index.xhtml">Home</a>
            <div class="dropdown">
                <button class="dropbtn">Browse 
                    <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-content">
                    <a href="all_books.xhtml">All Books</a>
                    <a href="genre.xhtml">Genre</a>
                    <a href="mostliked.xhtml">Most Liked</a>
                </div>
            </div>
        </div>
        <br></br><br></br><br></br><br></br><br></br><br></br><br></br>
        <br></br><br></br><br></br><br></br>
        <div class="row" style="width: auto">
        <div class="column" style="width: 4.5%; background-color: #F6F4EE"></div>
        <div class="column" style="width: 60%; border: thin solid #ccc; min-height: 400px; padding-bottom: 100px; padding-left: 40px; padding-top: 50px; padding-right: 40px">
            <h4>All books:</h4>
            <br></br><br></br><br></br><br></br>
            <f:view>
                <h:form>
                    <center>
                    <h:dataTable var="p" value="#{bookController.findAll()}" border="1" cellpadding="2" cellspacing="2">
                        <h:column>
                            <f:facet name="header">ID</f:facet>
                            <!--<h:outputText value="#{p.bookId}"></h:outputText>-->
                            <h:link value="#{p.bookId}" outcome="book" >
                                <f:param name='id' value="#{p.bookId}" />
                            </h:link>
                        </h:column>
                        <h:column>
                            <f:facet name="header">Name</f:facet>
                            <h:outputText value="#{p.bookName}"></h:outputText>
                        </h:column>
                        <h:column>
                            <f:facet name="header">Author</f:facet>
                            <h:outputText value="#{p.authorName}"></h:outputText>
                        </h:column>
                        <h:column>
                            <f:facet name="header">Release Date</f:facet>
                            <h:outputText value="#{p.releaseDate}"></h:outputText>
                        </h:column>
                        <h:column>
                            <f:facet name="header">Description</f:facet>
                            <h:outputText value="#{p.description}"></h:outputText>
                        </h:column>
                        <h:column>
                            <f:facet name="header">Genre</f:facet>
                            <h:outputText value="#{bookController.getGenre(p.genreList)}"></h:outputText>
                        </h:column>
                        <h:column rendered="#{loginController.checkAdmin()}">
                            <h:commandButton value="Delete" action="#{bookController.remove(p)}"></h:commandButton>
                            <h:commandButton value="Edit" action="#{bookController.initiateEdit(p)}"></h:commandButton>
                        </h:column>
                    </h:dataTable>
                    </center>
                </h:form>
            </f:view>
        </div>
        <div class="column" style="width: 1%; background-color: #F6F4EE"></div>
        <div class="column" style="width: 30%;  border: thin solid #ccc; min-height: 400px; padding-bottom: 80px; padding-left: 40px; padding-top: 50px; padding-right: 40px">
            <h4>Sort By:</h4><br></br><br></br>
            <f:view>
                <h:form>
                    <center>
                    <h:selectOneMenu id="choice2" value="#{bookController.choice}" title="Choice" style="height: 35px; background-color: white">
                        <f:selectItem itemValue = "1" itemLabel = "Title" /> 
                        <f:selectItem itemValue = "2" itemLabel = "Author" />
                        <f:selectItem itemValue = "3" itemLabel = "Release Date"/>
                        <f:selectItem itemValue = "4" itemLabel = "None"/>
                    </h:selectOneMenu><br></br><br></br><br></br>
                  <h:commandButton value="Sort" action="#{bookController.goToBooks()}"></h:commandButton>
                  </center>
                </h:form>
            </f:view>
            <br></br><br></br><br></br><br></br>
            <f:view>
                <h:form rendered="#{loginController.checkAdmin()}">
                    <h4><h:outputText value="Create/Edit"/></h4>
                    <br></br><br></br>
                    <h:panelGrid columns="2" style="padding-left: 50px">
                        <h:outputLabel value="BookName:" for="bookName" />
                        <h:inputText id="bookName" value="#{bookController.b.bookName}" title="BookName" required="true" requiredMessage="Input field Book Name can't be empty"/>
                        <h:outputLabel value="ReleaseDate:" for="releaseDate" />
                        <h:inputText id="releaseDate" value="#{bookController.b.releaseDate}" title="ReleaseDate" required="true" requiredMessage="Input field release date can't be empty">
                            <f:convertDateTime pattern="MM/dd/yyyy" />
                        </h:inputText>
                        <h:outputLabel value="AuthorName:" for="authorName" />
                        <h:inputText id="authorName" value="#{bookController.b.authorName}" title="AuthorName" required="true" requiredMessage="Input field author name can't be empty"/>
                        <h:outputLabel value="Description:" for="description" />
                        <h:inputTextarea id="description" value="#{bookController.b.description}" title="Description" required="true" requiredMessage="Input field description can't be empty"/>
                        <h:outputLabel value="Genre:" for="genre" />
                        <h:selectManyCheckbox value="#{bookController.genre}" layout="pageDirection" required="true" requiredMessage="Input field genre can't be empty">
                            <f:selectItems value="#{genreController.findAll()}" var="n" itemLabel="#{n.genreName}" itemValue="#{n.genreId}"/><br></br>
                        </h:selectManyCheckbox>
                        <h:commandButton value="Save" action="#{bookController.add()}"></h:commandButton>
                    </h:panelGrid>
                    
                </h:form>
                
            </f:view>

        </div>
        <div class="column" style="width: 4.5%; background-color: #F6F4EE"></div>
    </div>
    </h:body>
</html>